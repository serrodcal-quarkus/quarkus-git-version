name: Main Branch CI


on:
  push:
    branches: [main]

jobs:
  # This workflow contains a single job called "build"
  main-integration:

    name: Main Integration Build and Publish

    runs-on: ubuntu-latest

    steps:

      # In order for the gitversion to properly work you need to clone the repository with the entire history:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Install GitVersion
        uses: gittools/actions/gitversion/setup@v3.0.0
        with:
          versionSpec: '6.x'

      - name: Determine Version
        uses: gittools/actions/gitversion/execute@v3.0.0
        with:
          useConfigFile: true

      - name: Set up JDK 21
        uses: actions/setup-java@v3
        with:
          distribution: "temurin"
          java-version: 21
          cache: "maven"

